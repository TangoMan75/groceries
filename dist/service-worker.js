let CACHE_NAME="grocery-list-v2",BASE_URL=self.location.pathname.replace(/service-worker\.js$/i,""),urlsToCache=["./","./index.html","./favicon/site.webmanifest","./favicon/android-chrome-192x192.png","./favicon/android-chrome-512x512.png","./favicon/favicon-32x32.png","./favicon/favicon-16x16.png","./favicon/apple-touch-icon.png"];function doBackgroundSync(){return console.log("Background sync triggered"),Promise.resolve()}self.addEventListener("install",e=>{e.waitUntil(caches.open(CACHE_NAME).then(e=>(console.log("Opened cache"),e.addAll(urlsToCache))).catch(e=>{console.error("Failed to cache resources:",e)}))}),self.addEventListener("fetch",e=>{let n=e.request;new URL(n.url).origin===self.location.origin&&e.respondWith(caches.open(CACHE_NAME).then(async e=>{let t=await e.match(n),a=fetch(n).then(t=>(t&&200===t.status&&("basic"===t.type||"opaque"===t.type)&&e.put(n,t.clone()),t)).catch(()=>void 0);return t||a||("document"===n.destination?e.match("./index.html"):void 0)}))}),self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(e=>Promise.all(e.map(e=>{if(e!==CACHE_NAME)return console.log("Deleting old cache:",e),caches.delete(e)}))))}),self.addEventListener("sync",e=>{"background-sync"===e.tag&&e.waitUntil(doBackgroundSync())}),self.addEventListener("push",e=>{let n={body:e.data?e.data.text():"New grocery list update!",icon:"./favicon/android-chrome-192x192.png",badge:"./favicon/android-chrome-192x192.png",vibrate:[100,50,100],data:{dateOfArrival:Date.now(),primaryKey:1}};e.waitUntil(self.registration.showNotification("Grocery List",n))});
//# sourceMappingURL=service-worker.js.map
